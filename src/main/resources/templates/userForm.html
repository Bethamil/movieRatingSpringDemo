<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org">
<head th:replace="fragments/general :: baseHeader(~{::title})">
    <title>User</title>
</head>
<div th:replace="fragments/general :: navbar('Settings')"></div>
<body>
<div class="container">
    <table class="table table-dark thead-light table-striped">
        <form th:action="@{/movieUser/update}" method="post" th:object="${currentUser}">
            <tr>
                <th>Change Password</th>
                <th></th>
                <th></th>
            </tr>
            <input type="number" hidden th:field="*{userId}"/>
            <input type="text" hidden th:field="*{username}"/>

            <td>Username <input type="text" disabled th:field="*{username}"/></td>
<!--            <td><span sec:authentication="name"></span></td>-->
            <td>Password <input type="password" th:field="*{password}" required></td>
            <td><input class="btn btn-danger" style="padding: 10px 20px" type="submit" value="change password" required></td>
        </form>
    </table>

    <table class="table table-dark thead-light table-striped">
        <form th:action="@{/movieUser/new}" method="post" th:object="${newUser}">
            <tr>
                <th>add new User</th>
                <th></th>
                <th></th>
            </tr>
            <td>Username <input type="text" th:field="*{username}" required/></td>
            <td>Password <input type="password" th:field="*{password}" required></td>
            <td><input class="btn btn-danger" style="padding: 10px 20px" type="submit" value="Save new user"></td>
        </form>
    </table>

    <table class="table table-dark thead-light table-striped">
        <tr>
        </tr>
        <tr th:each="user : ${allMovieUsers}">
            <td th:text="${user.username}"></td>
            <td><a class="btn btn-danger" th:href="@{/movieUser/updateSelectedUser/{userId}(userId=${user.userId})}">
                edit </a>
            </td>

            <td><a class="btn btn-danger" th:href="@{/movieUser/delete/{userId}(userId=${user.userId})}">
                delete </a>
            </td>
        </tr>
    </table>

</div>

</body>

<div th:replace="fragments/general :: footer"></div>
<div th:replace="fragments/general :: bottomScripts"></div>
</html>